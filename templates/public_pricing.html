{% extends "base.html" %}
{% block content %}

<style>
  .pricing-hero{background:linear-gradient(135deg,#0b5ed7,#6f42c1);}
  .card-hover{transition:transform .15s ease, box-shadow .15s ease}
  .card-hover:hover{transform:translateY(-2px); box-shadow:0 .5rem 1rem rgba(0,0,0,.15)}
</style>

<!-- ============ HERO ============ -->
<section class="pricing-hero text-white text-center py-5 border-bottom">
  <div class="container py-3">
    <h1 class="display-6 fw-bold mb-2">Preise</h1>
    <p class="lead mb-0 text-white-50">Starte kostenlos – upgrade, wenn du mehr Power brauchst.</p>
  </div>
</section>

<div class="container py-5">

  {% if ev_free_limit_hit|default(false) %}
    <div class="alert alert-info" role="alert">
      Du hast das Limit der kostenlosen Suchen erreicht. Mit <strong>Premium</strong> erhältst du unbegrenzte Agenten und schnellere Intervalle.
    </div>
  {% endif %}

  <!-- ============ PLANS (3-Spalten) ============ -->
  <div class="row g-4 row-cols-1 row-cols-md-3 align-items-stretch">

    <!-- Free -->
    <div class="col">
      <div class="card h-100 shadow-sm card-hover">
        <div class="card-body p-4 d-flex flex-column">
          <h3 class="h5 mb-1">Free</h3>
          <p class="text-muted mb-1">Ideal zum Ausprobieren</p>
          <div class="display-6 fw-bold mb-2">0 € <span class="fs-6 fw-normal text-muted">/ immer</span></div>
          <ul class="list-unstyled small my-3 flex-grow-1">
            <li class="mb-1">✔ 3 Suchen gratis</li>
            <li class="mb-1">✔ Basisfunktionen</li>
            <li class="mb-1">✔ Teilen-Links</li>
          </ul>
          <a href="{{ url_for('search') }}" class="btn btn-outline-primary mt-auto">Kostenlos starten</a>
        </div>
      </div>
    </div>

    <!-- Basic -->
    <div class="col">
      <div class="card h-100 border-primary border-2 card-hover">
        <div class="card-body p-4 d-flex flex-column">
          <h3 class="h5 mb-1">Basic</h3>
          <p class="text-muted mb-1">Mehr Alerts, schneller</p>
          <div class="display-6 fw-bold mb-2">7 € <span class="fs-6 fw-normal text-muted">/ Monat</span></div>
          <ul class="list-unstyled small my-3 flex-grow-1">
            <li class="mb-1">✔ 10 Alerts</li>
            <li class="mb-1">✔ Schnellere Intervalle</li>
            <li class="mb-1">✔ Telegram inkl.</li>
          </ul>
          <form method="post" action="/billing/checkout" class="mt-auto">
            <input type="hidden" name="price" value="basic">
            <button class="btn btn-primary w-100" type="submit">Basic wählen</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Pro -->
    <div class="col">
      <div class="card h-100 border-success border-2 card-hover">
        <div class="card-body p-4 d-flex flex-column">
          <div class="d-flex justify-content-between align-items-start">
            <h3 class="h5 mb-1">Pro</h3>
            <span class="badge text-bg-success">Beliebtester Plan</span>
          </div>
          <div class="display-6 fw-bold mb-2">15 € <span class="fs-6 fw-normal text-muted">/ Monat</span></div>
          <ul class="list-unstyled small my-3 flex-grow-1">
            <li class="mb-1">✔ 30 Alerts</li>
            <li class="mb-1">✔ Nahezu Echtzeit</li>
            <li class="mb-1">✔ Telegram inkl., CSV-Export</li>
          </ul>
          <form method="post" action="/billing/checkout" class="mt-auto">
            <input type="hidden" name="price" value="pro">
            <button class="btn btn-success w-100" type="submit">Pro wählen</button>
          </form>
        </div>
      </div>
    </div>

  </div>

  <!-- Team (eigene Reihe) -->
  <div class="row g-4 mt-3">
    <div class="col-12 col-md-6">
      <div class="card h-100 border-dark border-2 card-hover">
        <div class="card-body p-4 d-flex flex-column">
          <h3 class="h5 mb-1">Team</h3>
          <div class="display-6 fw-bold mb-2">29 € <span class="fs-6 fw-normal text-muted">/ Monat</span></div>
          <ul class="list-unstyled small my-3 flex-grow-1">
            <li class="mb-1">✔ 100 Alerts</li>
            <li class="mb-1">✔ Priorisierte Abfragen</li>
            <li class="mb-1">✔ Mehrere Nutzer & Rollen</li>
          </ul>
          <form method="post" action="/billing/checkout" class="mt-auto">
            <input type="hidden" name="price" value="team">
            <button class="btn btn-dark w-100" type="submit">Team wählen</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- ============ FEATURE COMPARISON ============ -->
  <div class="table-responsive mt-5">
    <table class="table align-middle">
      <thead>
        <tr>
          <th>Funktion</th>
          <th>Free</th>
          <th>Basic</th>
          <th>Pro</th>
          <th>Team</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Suchagenten</td>
          <td>3</td>
          <td>10</td>
          <td>30</td>
          <td>100</td>
        </tr>
        <tr>
          <td>Intervall</td>
          <td>Regelmäßig</td>
          <td><span class="badge text-bg-primary">Schneller</span></td>
          <td><span class="badge text-bg-success">Sehr schnell</span></td>
          <td><span class="badge text-bg-dark">Priorisiert</span></td>
        </tr>
        <tr>
          <td>E-Mail-Benachrichtigungen</td>
          <td>—</td>
          <td>✔</td>
          <td>✔</td>
          <td>✔</td>
        </tr>
        <tr>
          <td>Telegram Alerts</td>
          <td>—</td>
          <td>✔</td>
          <td>✔</td>
          <td>✔</td>
        </tr>
        <tr>
          <td>CSV-Export</td>
          <td>—</td>
          <td>—</td>
          <td>✔</td>
          <td>✔</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- ============ FAQ ============ -->
  <div class="mt-5" id="faq">
    <h2 class="h4 mb-3">Häufige Fragen</h2>

    <div class="accordion" id="faqAccordion">
      <div class="accordion-item">
        <h2 class="accordion-header" id="q1">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#a1" aria-expanded="true" aria-controls="a1">
            Wie funktionieren die E-Mail-Alerts?
          </button>
        </h2>
        <div id="a1" class="accordion-collapse collapse show" aria-labelledby="q1" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            Du speicherst eine Suche (Begriffe + Filter). Sobald neue passende eBay-Angebote online gehen, senden wir dir eine E-Mail.
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header" id="q2">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a2" aria-expanded="false" aria-controls="a2">
            Was ist der Unterschied zwischen Free, Basic, Pro und Team?
          </button>
        </h2>
        <div id="a2" class="accordion-collapse collapse" aria-labelledby="q2" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            Free eignet sich zum Testen (3 Agenten). Basic/Pro erhöhen Limits & Tempo, Team bringt mehr Nutzer & Priorisierung.
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header" id="q3">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a3" aria-expanded="false" aria-controls="a3">
            Kann ich monatlich kündigen?
          </button>
        </h2>
        <div id="a3" class="accordion-collapse collapse" aria-labelledby="q3" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            Ja. Du kannst monatlich kündigen; dein Abo läuft dann zum Ende des bezahlten Zeitraums aus.
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header" id="q4">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a4" aria-expanded="false" aria-controls="a4">
            Bietet ihr einen Jahresplan an?
          </button>
        </h2>
        <div id="a4" class="accordion-collapse collapse" aria-labelledby="q4" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            Auf Wunsch ja – typischerweise mit 20–30% Rabatt. Sprich uns an, wenn du wechseln möchtest.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ============ FINAL CTA ============ -->
  <div class="text-center mt-5">
    <p class="text-muted mb-3">Bereit? Sichere dir Premium und verpasse keine neuen Angebote mehr.</p>
    <a href="/checkout" class="btn btn-primary btn-lg">Abo starten</a>
  </div>
</div>

{% endblock %}
